{"changed":true,"filter":false,"title":"sort.html","tooltip":"/sort.html","value":"<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\nbody {\n  background-color: #d1e5f0;\n  font: 14px sans-serif;\n}\n\n#container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n#title {\n  font: 26px sans-serif;\n  position: absolute;\n  top: -40px;\n  left: 450px;\n}\n\n#FilterableTable {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 40px;\n  left: 20px;\n}\n\n.SearchBar { \n  display: inline; \n  position: relative;\n  left: 1%;\n}\n\n.SearchBar input {\n  position: relative;\n  left: 2%;\n}\n\ntable { \n  position: absolute;\n  top: 40px;\n  left: 20px;\n  border-collapse: collapse;\n  margin-bottom: 20px;\n}\n\ntable a:link, a:visited { text-decoration: none; }\n\ntable a:hover, a:active { text-decoration: underline; }\n\ntable, th, td { border: 1px solid black; }\n\ntd, th {\n  padding: 5px;\n  text-align: center;\n  height: 20px;\n}\n\nth {\n  background-color: #4393c3;\n  color: #d9f0a3;\n}\n\ntd { background-color: #92c5de; }\n\ntr:hover td { background-color: #edf8b1; }\n\n</style>\n<body>\n<script src=\"https://d3js.org/d3.v3.js\"></script>\n<script>\n\nvar column_names = [\"Title\",\"Views\",\"Created On\",\"URL\"];\nvar clicks = {title: 0, views: 0, created_on: 0, url: 0};\n\n// draw the table\nd3.select(\"body\").append(\"div\")\n  .attr(\"id\", \"container\")\n\nd3.select(\"#container\").append(\"div\")\n  .attr(\"id\", \"FilterableTable\");\n\nd3.select(\"#FilterableTable\").append(\"h1\")\n  .attr(\"id\", \"title\")\n  .text(\"My Youtube Channels\")\n\nd3.select(\"#FilterableTable\").append(\"div\")\n  .attr(\"class\", \"SearchBar\")\n  .append(\"p\")\n    .attr(\"class\", \"SearchBar\")\n    .text(\"Search By Title:\");\n\nd3.select(\".SearchBar\")\n  .append(\"input\")\n    .attr(\"class\", \"SearchBar\")\n    .attr(\"id\", \"search\")\n    .attr(\"type\", \"text\")\n    .attr(\"placeholder\", \"Search...\");\n  \nvar table = d3.select(\"#FilterableTable\").append(\"table\");\ntable.append(\"thead\").append(\"tr\"); \n\nvar headers = table.select(\"tr\").selectAll(\"th\")\n    .data(column_names)\n  .enter()\n    .append(\"th\")\n    .text(function(d) { return d; });\n\nvar rows, row_entries, row_entries_no_anchor, row_entries_with_anchor;\n  \nd3.json(\"data.json\", function(data) { // loading data from server\n  \n  // draw table body with rows\n  table.append(\"tbody\")\n\n  // data bind\n  rows = table.select(\"tbody\").selectAll(\"tr\")\n    .data(data, function(d){ return d.id; });\n  \n  // enter the rows\n  rows.enter()\n    .append(\"tr\")\n  \n  // enter td's in each row\n  row_entries = rows.selectAll(\"td\")\n      .data(function(d) { \n        var arr = [];\n        for (var k in d) {\n          if (d.hasOwnProperty(k)) {\n\t\t    arr.push(d[k]);\n          }\n        }\n        return [arr[3],arr[1],arr[2],arr[0]];\n      })\n    .enter()\n      .append(\"td\") \n\n  // draw row entries with no anchor \n  row_entries_no_anchor = row_entries.filter(function(d) {\n    return (/https?:\\/\\//.test(d) == false)\n  })\n  row_entries_no_anchor.text(function(d) { return d; })\n\n  // draw row entries with anchor\n  row_entries_with_anchor = row_entries.filter(function(d) {\n    return (/https?:\\/\\//.test(d) == true)  \n  })\n  row_entries_with_anchor\n    .append(\"a\")\n    .attr(\"href\", function(d) { return d; })\n    .attr(\"target\", \"_blank\")\n  .text(function(d) { return d; })\n    \n    \n  /**  search functionality **/\n    d3.select(\"#search\")\n      .on(\"keyup\", function() { // filter according to key pressed \n        var searched_data = data,\n            text = this.value.trim();\n        \n        var searchResults = searched_data.map(function(r) {\n          var regex = new RegExp(\"^\" + text + \".*\", \"i\");\n          if (regex.test(r.title)) { // if there are any results\n            return regex.exec(r.title)[0]; // return them to searchResults\n          } \n        })\n\t    \n\t    // filter blank entries from searchResults\n        searchResults = searchResults.filter(function(r){ \n          return r != undefined;\n        })\n        \n        // filter dataset with searchResults\n        searched_data = searchResults.map(function(r) {\n           return data.filter(function(p) {\n            return p.title.indexOf(r) != -1;\n          })\n        })\n\n        // flatten array \n\t\tsearched_data = [].concat.apply([], searched_data)\n        \n        // data bind with new data\n\t\trows = table.select(\"tbody\").selectAll(\"tr\")\n\t\t  .data(searched_data, function(d){ return d.id; })\n\t\t\n        // enter the rows\n        rows.enter()\n         .append(\"tr\");\n         \n        // enter td's in each row\n        row_entries = rows.selectAll(\"td\")\n            .data(function(d) { \n              var arr = [];\n              for (var k in d) {\n                if (d.hasOwnProperty(k)) {\n\t\t          arr.push(d[k]);\n                }\n              }\n              return [arr[3],arr[1],arr[2],arr[0]];\n            })\n          .enter()\n            .append(\"td\") \n\n        // draw row entries with no anchor \n        row_entries_no_anchor = row_entries.filter(function(d) {\n          return (/https?:\\/\\//.test(d) == false)\n        })\n        row_entries_no_anchor.text(function(d) { return d; })\n\n        // draw row entries with anchor\n        row_entries_with_anchor = row_entries.filter(function(d) {\n          return (/https?:\\/\\//.test(d) == true)  \n        })\n        row_entries_with_anchor\n          .append(\"a\")\n          .attr(\"href\", function(d) { return d; })\n          .attr(\"target\", \"_blank\")\n        .text(function(d) { return d; })\n        \n        // exit\n        rows.exit().remove();\n      })\n    \n  /**  sort functionality **/\n  headers\n    .on(\"click\", function(d) {\n      if (d == \"Title\") {\n        clicks.title++;\n        // even number of clicks\n        if (clicks.title % 2 == 0) {\n          // sort ascending: alphabetically\n          rows.sort(function(a,b) { \n            if (a.title.toUpperCase() < b.title.toUpperCase()) { \n              return -1; \n            } else if (a.title.toUpperCase() > b.title.toUpperCase()) { \n              return 1; \n            } else {\n              return 0;\n            }\n          });\n        // odd number of clicks  \n        } else if (clicks.title % 2 != 0) { \n          // sort descending: alphabetically\n          rows.sort(function(a,b) { \n            if (a.title.toUpperCase() < b.title.toUpperCase()) { \n              return 1; \n            } else if (a.title.toUpperCase() > b.title.toUpperCase()) { \n              return -1; \n            } else {\n              return 0;\n            }\n          });\n        }\n      } \n      if (d == \"Views\") {\n\t    clicks.views++;\n        // even number of clicks\n        if (clicks.views % 2 == 0) {\n          // sort ascending: numerically\n          rows.sort(function(a,b) { \n            if (+a.views < +b.views) { \n              return -1; \n            } else if (+a.views > +b.views) { \n              return 1; \n            } else {\n              return 0;\n            }\n          });\n        // odd number of clicks  \n        } else if (clicks.views % 2 != 0) { \n          // sort descending: numerically\n          rows.sort(function(a,b) { \n            if (+a.views < +b.views) { \n              return 1; \n            } else if (+a.views > +b.views) { \n              return -1; \n            } else {\n              return 0;\n            }\n          });\n        }\n      } \n      if (d == \"Created On\") {\n        clicks.created_on++;\n        if (clicks.created_on % 2 == 0) {\n          // sort ascending: by date\n          rows.sort(function(a,b) { \n            // grep date and time, split them apart, make Date objects for comparing  \n\t        var date = /[\\d]{4}-[\\d]{2}-[\\d]{2}/.exec(a.created_on);\n\t        date = date[0].split(\"-\"); \n\t        var time = /[\\d]{2}:[\\d]{2}:[\\d]{2}/.exec(a.created_on);\n\t        time = time[0].split(\":\");\n\t        var a_date_obj = new Date(+date[0],(+date[1]-1),+date[2],+time[0],+time[1],+time[2]);\n          \n            date = /[\\d]{4}-[\\d]{2}-[\\d]{2}/.exec(b.created_on);\n\t        date = date[0].split(\"-\"); \n\t        time = /[\\d]{2}:[\\d]{2}:[\\d]{2}/.exec(b.created_on);\n\t        time = time[0].split(\":\");\n\t        var b_date_obj = new Date(+date[0],(+date[1]-1),+date[2],+time[0],+time[1],+time[2]);\n\t\t\t          \n            if (a_date_obj < b_date_obj) { \n              return -1; \n            } else if (a_date_obj > b_date_obj) { \n              return 1; \n            } else {\n              return 0;\n            }\n          });\n        // odd number of clicks  \n        } else if (clicks.created_on % 2 != 0) { \n          // sort descending: by date\n          rows.sort(function(a,b) { \n            // grep date and time, split them apart, make Date objects for comparing  \n\t        var date = /[\\d]{4}-[\\d]{2}-[\\d]{2}/.exec(a.created_on);\n\t        date = date[0].split(\"-\"); \n\t        var time = /[\\d]{2}:[\\d]{2}:[\\d]{2}/.exec(a.created_on);\n\t        time = time[0].split(\":\");\n\t        var a_date_obj = new Date(+date[0],(+date[1]-1),+date[2],+time[0],+time[1],+time[2]);\n          \n            date = /[\\d]{4}-[\\d]{2}-[\\d]{2}/.exec(b.created_on);\n\t        date = date[0].split(\"-\"); \n\t        time = /[\\d]{2}:[\\d]{2}:[\\d]{2}/.exec(b.created_on);\n\t        time = time[0].split(\":\");\n\t        var b_date_obj = new Date(+date[0],(+date[1]-1),+date[2],+time[0],+time[1],+time[2]);\n\t\t\t          \n            if (a_date_obj < b_date_obj) { \n              return 1; \n            } else if (a_date_obj > b_date_obj) { \n              return -1; \n            } else {\n              return 0;\n            }\n          });\n        }\n      }\n      if (d == \"URL\") {\n        clicks.url++;\n\t    // even number of clicks\n        if (clicks.url % 2 == 0) {\n          // sort ascending: alphabetically\n          rows.sort(function(a,b) { \n            if (a.thumb_url_default.toUpperCase() < b.thumb_url_default.toUpperCase()) { \n              return -1; \n            } else if (a.thumb_url_default.toUpperCase() > b.thumb_url_default.toUpperCase()) { \n              return 1; \n            } else {\n              return 0;\n            }\n          });\n        // odd number of clicks  \n        } else if (clicks.url % 2 != 0) { \n          // sort descending: alphabetically\n          rows.sort(function(a,b) { \n            if (a.thumb_url_default.toUpperCase() < b.thumb_url_default.toUpperCase()) { \n              return 1; \n            } else if (a.thumb_url_default.toUpperCase() > b.thumb_url_default.toUpperCase()) { \n              return -1; \n            } else {\n              return 0;\n            }\n          });\n        }\t\n      }      \n    }) // end of click listeners\n});\nd3.select(self.frameElement).style(\"height\", \"780px\").style(\"width\", \"1150px\");\t\n</script>","undoManager":{"mark":-2,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":3617,"scrollleft":0,"selection":{"start":{"row":227,"column":2},"end":{"row":366,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":740,"mode":"ace/mode/html"}},"timestamp":1570801143943}